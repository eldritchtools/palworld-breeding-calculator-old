(()=>{"use strict";var e={8998:(e,t,n)=>{var r=n(9379),s=n(1512),o=n.n(s),i=n(3043);const a=(e,t)=>e.sortIndex<t.sortIndex?(e.sortIndex<<10)+t.sortIndex:(t.sortIndex<<10)+e.sortIndex,c=Object.values(i.tP).reduce((e,t)=>(e[t.sortIndex]=t,e),{}),l=(e,t,n)=>(e.sortIndex<<n.length)+t,d=Object.values(i.tP).sort((e,t)=>e.breedingPower-t.breedingPower),u=d.reduce((e,t,n)=>(e[t.id]=n,e),{}),h=d.filter(e=>!e.unique),f=h.reduce((e,t,n)=>(e[t.id]=n,e),{}),p=Object.values(i.tP).reduce((e,t)=>(t.parents&&t.parents.forEach(n=>{const r=a(i.tP[n[0]],i.tP[n[1]]);r in e?e[r].push(t.id):e[r]=[t.id]}),e),{});function g(e,t){const n=a(e,t);return n in p?p[n]:null}function b(e,t){return e.breedingPower+t.breedingPower+1>>1}function P(e,t,n){const r=Math.abs(e-t.breedingPower),s=Math.abs(e-n.breedingPower);return r<s||r===s&&t.tiebreakIndex<n.tiebreakIndex}function v(e){return e.sort((e,t)=>{let[n,r]=e,[s,o]=t;return n.id===s.id?r.sortIndex-o.sortIndex:n.sortIndex-s.sortIndex})}function x(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return[];const n=i.tP[e];if(n.unique)return v([...n.parents.map(e=>e.map(e=>i.tP[e]))]);{const e=[],r=f[n.id],s=0!==r,o=r!==Object.keys(f).length-1;let i=u[n.id];for(let t=i;t>=0;t--)for(let a=i;a<d.length;a++){const c=b(d[t],d[a]),l=Math.abs(c-n.breedingPower);if(s){const e=Math.abs(c-h[r-1].breedingPower);if(e<l||e===l&&h[r-1].tiebreakIndex<n.tiebreakIndex){i++;continue}}if(o){const e=Math.abs(c-h[r+1].breedingPower);if(e<l||e===l&&h[r+1].tiebreakIndex<n.tiebreakIndex)break}const u=d[t],f=d[a];u.sortIndex<f.sortIndex?e.push([u,f]):e.push([f,u])}return t?v(e):e}}self.onmessage=function(e){const{command:t,params:n}=e.data;"start"===t?function(e){let{targetChildId:t,targetPassives:n,profileData:s,searchBeamSize:a,costThreshold:u}=e;if(!t)return{candidatePaths:[],suggestedPals:[]};k=!1;const f=Object.entries(s.pals).reduce((e,t)=>{let[r,s]=t,o=0;for(let i=0;i<n.length;i++)s.includes(n[i])&&(o|=1<<i);return e[r]=o,e},{}),p=new(o())({comparator:(e,t)=>e.cost-t.cost}),v={},I={},O=[],m=(1<<n.length)-1;v[l(i.tP[t],m,n)]=O;const j=100*a;let w=[];const y=function(e,r,s,o){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const c=l(r,s,n);if(i){const t={cost:e,pal:r,mask:s,path:o};return c in v?v[c].push(t):v[c]=[t],w.push(t),t}if(!(c in v)){const t={cost:e,pal:r,mask:s,path:o};return v[c]=[t],I[c]=!1,t}if(v[c].length<a||e<v[c][v[c].length-1].cost){const n={cost:e,pal:r,mask:s,path:o};return v[c].push(n),v[c].sort((e,t)=>e.cost-t.cost),I[c]=!1,r.id!==t&&v[c].length>a&&(v[c].length=a),n}return null};Object.keys(s.pals).forEach(e=>{const t=y(0,i.tP[e],f[e],{});t&&p.queue(t)});const E=()=>{let e=0;for(;p.length>0&&O.length<j&&!k&&e<50;){e++;const o=p.dequeue(),{pal:a,mask:c,path:u}=o,x=l(a,c,n);if(!v[x].includes(o))continue;I[x]=!0;let m=0;Object.values(d).forEach(e=>{if(e.id===t)return;if(O.length>=j&&!k)return;let o=g(a,e);if(o||a.id!==e.id||(o=[a.id]),!o){const t=b(a,e);for(;m<h.length-1&&!P(t,h[m],h[m+1]);)m++;o=[h[m].id]}o.forEach(o=>{for(let d=0;d<1<<n.length;d++){const h=l(e,d,n);if(!I[h])continue;const g=(o in f?f[o]:0)|c|d,b=l(i.tP[o],g,n);if(b in u)continue;if(o in s.pals&&(f[o]|c|d)===f[o])continue;if(a.id===e.id&&((c|d)===c||(c|d)===d))continue;let P=null;if(e.id in s.pals){if((d|f[e.id])===f[e.id]&&d!==f[e.id])continue;h in v&&(P=v[h])}else h in v&&(P=v[h]);P&&P.forEach(s=>{if(b in s.path)return;const l=(0,r.A)((0,r.A)((0,r.A)({},u),s.path),{},{[b]:[[a,c],[e,d]]});if(o===t&&g===(1<<n.length)-1)y(Object.keys(l).length,i.tP[o],g,l,!0);else{const e=y(Object.keys(l).length,i.tP[o],g,l);e&&p.queue(e)}})}})})}if(w.length>0&&(self.postMessage({type:"batch",results:w}),w.length=0),0===p.length||O.length>=j||k){O.sort((e,t)=>e.cost-t.cost);const e=new Set,r={},o=(e,t,n)=>{e.id in s.pals||(e.id in r?r[e.id]+=t/(1+3*n):r[e.id]=t/(1+3*n))};O.length>0?O.forEach(t=>{let{cost:r,path:i}=t;Object.entries(i).forEach(t=>{let[i,[[a,d],[h,f]]]=t;const[p,g]=((e,t)=>[c[e>>t.length],e&(1<<t.length)-1])(i,n),b=v[l(a,d,n)][0].cost,P=v[l(h,f,n)][0].cost;f!==g||h.id in s.pals||o(h,b,r-b),d!==g||a.id in s.pals||o(a,P,r-P),e.has(i)||(e.add(i),x(p.id,!1).forEach(e=>{let[t,i]=e;const a=v[l(t,g,n)],c=v[l(i,g,n)];a&&a[0].cost<=u&&!(i.id in s.pals)&&o(i,u,r-u),c&&c[0].cost<=u&&!(t.id in s.pals)&&o(t,u,r-u)}))})}):x(t,!1).forEach(e=>{let[t,r]=e;const i=v[l(t,m,n)],a=v[l(r,m,n)];i&&i.length>0&&i[0].cost<=u&&!(r.id in s.pals)&&o(r,u,i[0].cost),a&&a.length>0&&a[0].cost<=u&&!(t.id in s.pals)&&o(t,u,a[0].cost)});const a={candidatePaths:O,suggestedPals:Object.keys(r).sort((e,t)=>r[t]-r[e]).map(e=>i.tP[e])};self.postMessage({type:"done",results:a,cancelled:k})}else setTimeout(E,0)};E()}(n):"cancel"===t&&(k=!0)};let k=!1}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.x=()=>{var e=n.O(void 0,[800],()=>n(8998));return e=n.O(e)},(()=>{var e=[];n.O=(t,r,s,o)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],o=e[d][2];for(var a=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every(e=>n.O[e](r[c]))?r.splice(c--,1):(a=!1,o<i&&(i=o));if(a){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,s,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".9f69be2a.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/palworld-breeding-calculator-old/",(()=>{var e={998:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunkpalworld_breeding_calculator_old=self.webpackChunkpalworld_breeding_calculator_old||[],r=t.push.bind(t);t.push=t=>{var s=t[0],o=t[1],i=t[2];for(var a in o)n.o(o,a)&&(n.m[a]=o[a]);for(i&&i(n);s.length;)e[s.pop()]=1;r(t)}})(),(()=>{var e=n.x;n.x=()=>n.e(800).then(e)})();n.x()})();
//# sourceMappingURL=998.19e430b9.chunk.js.map